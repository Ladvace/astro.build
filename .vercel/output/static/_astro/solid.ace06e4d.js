const v={};function K(e){v.context=e}function se(){return{...v.context,id:`${v.context.id}${v.context.count++}-`,count:0}}const le=(e,t)=>e===t,D=Symbol("solid-proxy"),ue=Symbol("solid-track"),L={equals:le};let X=Z;const m=1,N=2,Y={owned:null,cleanups:null,context:null,owner:null};var f=null;let S=null,c=null,a=null,y=null,B=0;function $(e,t){const s=c,n=f,r=e.length===0,l=r?Y:{owned:null,cleanups:null,context:null,owner:t||n},i=r?e:()=>e(()=>k(()=>M(l)));f=l,c=null;try{return C(i,!0)}finally{c=s,f=n}}function ie(e,t){t=t?Object.assign({},L,t):L;const s={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},n=r=>(typeof r=="function"&&(r=r(s.value)),J(s,r));return[z.bind(s),n]}function de(e,t,s){const n=G(e,t,!1,m);P(n)}function oe(e,t,s){X=he;const n=G(e,t,!1,m),r=V&&te(f,V.id);r&&(n.suspense=r),n.user=!0,y?y.push(n):P(n)}function F(e,t,s){s=s?Object.assign({},L,s):L;const n=G(e,t,!0,0);return n.observers=null,n.observerSlots=null,n.comparator=s.equals||void 0,P(n),z.bind(n)}function k(e){const t=c;c=null;try{return e()}finally{c=t}}function we(e){oe(()=>k(e))}function ce(e){return f===null||(f.cleanups===null?f.cleanups=[e]:f.cleanups.push(e)),e}let V;function z(){const e=S;if(this.sources&&(this.state||e))if(this.state===m||e)P(this);else{const t=a;a=null,C(()=>R(this),!1),a=t}if(c){const t=this.observers?this.observers.length:0;c.sources?(c.sources.push(this),c.sourceSlots.push(t)):(c.sources=[this],c.sourceSlots=[t]),this.observers?(this.observers.push(c),this.observerSlots.push(c.sources.length-1)):(this.observers=[c],this.observerSlots=[c.sources.length-1])}return this.value}function J(e,t,s){let n=e.value;return(!e.comparator||!e.comparator(n,t))&&(e.value=t,e.observers&&e.observers.length&&C(()=>{for(let r=0;r<e.observers.length;r+=1){const l=e.observers[r],i=S&&S.running;i&&S.disposed.has(l),(i&&!l.tState||!i&&!l.state)&&(l.pure?a.push(l):y.push(l),l.observers&&_(l)),i||(l.state=m)}if(a.length>1e6)throw a=[],new Error},!1)),t}function P(e){if(!e.fn)return;M(e);const t=f,s=c,n=B;c=f=e,fe(e,e.value,n),c=s,f=t}function fe(e,t,s){let n;try{n=e.fn(t)}catch(r){e.pure&&(e.state=m,e.owned&&e.owned.forEach(M),e.owned=null),ee(r)}(!e.updatedAt||e.updatedAt<=s)&&(e.updatedAt!=null&&"observers"in e?J(e,n):e.value=n,e.updatedAt=s)}function G(e,t,s,n=m,r){const l={fn:e,state:n,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:f,context:null,pure:s};return f===null||f!==Y&&(f.owned?f.owned.push(l):f.owned=[l]),l}function I(e){const t=S;if(e.state===0||t)return;if(e.state===N||t)return R(e);if(e.suspense&&k(e.suspense.inFallback))return e.suspense.effects.push(e);const s=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<B);)(e.state||t)&&s.push(e);for(let n=s.length-1;n>=0;n--)if(e=s[n],e.state===m||t)P(e);else if(e.state===N||t){const r=a;a=null,C(()=>R(e,s[0]),!1),a=r}}function C(e,t){if(a)return e();let s=!1;t||(a=[]),y?s=!0:y=[],B++;try{const n=e();return ae(s),n}catch(n){a||(y=null),a=null,ee(n)}}function ae(e){if(a&&(Z(a),a=null),e)return;const t=y;y=null,t.length&&C(()=>X(t),!1)}function Z(e){for(let t=0;t<e.length;t++)I(e[t])}function he(e){let t,s=0;for(t=0;t<e.length;t++){const n=e[t];n.user?e[s++]=n:I(n)}for(v.context&&K(),t=0;t<s;t++)I(e[t])}function R(e,t){const s=S;e.state=0;for(let n=0;n<e.sources.length;n+=1){const r=e.sources[n];r.sources&&(r.state===m||s?r!==t&&I(r):(r.state===N||s)&&R(r,t))}}function _(e){const t=S;for(let s=0;s<e.observers.length;s+=1){const n=e.observers[s];(!n.state||t)&&(n.state=N,n.pure?a.push(n):y.push(n),n.observers&&_(n))}}function M(e){let t;if(e.sources)for(;e.sources.length;){const s=e.sources.pop(),n=e.sourceSlots.pop(),r=s.observers;if(r&&r.length){const l=r.pop(),i=s.observerSlots.pop();n<r.length&&(l.sourceSlots[i]=n,r[n]=l,s.observerSlots[n]=i)}}if(e.owned){for(t=0;t<e.owned.length;t++)M(e.owned[t]);e.owned=null}if(e.cleanups){for(t=0;t<e.cleanups.length;t++)e.cleanups[t]();e.cleanups=null}e.state=0,e.context=null}function ge(e){return e instanceof Error||typeof e=="string"?e:new Error("Unknown error")}function ee(e){throw e=ge(e),e}function te(e,t){return e?e.context&&e.context[t]!==void 0?e.context[t]:te(e.owner,t):void 0}const pe=Symbol("fallback");function W(e){for(let t=0;t<e.length;t++)e[t]()}function be(e,t,s={}){let n=[],r=[],l=[],i=0,o=t.length>1?[]:null;return ce(()=>W(l)),()=>{let d=e()||[],g,u;return d[ue],k(()=>{let h=d.length,x,A,O,j,T,p,b,w,E;if(h===0)i!==0&&(W(l),l=[],n=[],r=[],i=0,o&&(o=[])),s.fallback&&(n=[pe],r[0]=$(re=>(l[0]=re,s.fallback())),i=1);else if(i===0){for(r=new Array(h),u=0;u<h;u++)n[u]=d[u],r[u]=$(Q);i=h}else{for(O=new Array(h),j=new Array(h),o&&(T=new Array(h)),p=0,b=Math.min(i,h);p<b&&n[p]===d[p];p++);for(b=i-1,w=h-1;b>=p&&w>=p&&n[b]===d[w];b--,w--)O[w]=r[b],j[w]=l[b],o&&(T[w]=o[b]);for(x=new Map,A=new Array(w+1),u=w;u>=p;u--)E=d[u],g=x.get(E),A[u]=g===void 0?-1:g,x.set(E,u);for(g=p;g<=b;g++)E=n[g],u=x.get(E),u!==void 0&&u!==-1?(O[u]=r[g],j[u]=l[g],o&&(T[u]=o[g]),u=A[u],x.set(E,u)):l[g]();for(u=p;u<h;u++)u in O?(r[u]=O[u],l[u]=j[u],o&&(o[u]=T[u],o[u](u))):r[u]=$(Q);r=r.slice(0,i=h),n=d.slice(0)}return r});function Q(h){if(l[u]=h,o){const[x,A]=ie(u);return o[u]=A,t(d[u],x)}return t(d[u])}}}let ne=!1;function ye(){ne=!0}function me(e,t){if(ne&&v.context){const s=v.context;K(se());const n=k(()=>e(t||{}));return K(s),n}return k(()=>e(t||{}))}function U(){return!0}const q={get(e,t,s){return t===D?s:e.get(t)},has(e,t){return t===D?!0:e.has(t)},set:U,deleteProperty:U,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:U,deleteProperty:U}},ownKeys(e){return e.keys()}};function H(e){return(e=typeof e=="function"?e():e)?e:{}}function xe(...e){let t=!1;for(let n=0;n<e.length;n++){const r=e[n];t=t||!!r&&D in r,e[n]=typeof r=="function"?(t=!0,F(r)):r}if(t)return new Proxy({get(n){for(let r=e.length-1;r>=0;r--){const l=H(e[r])[n];if(l!==void 0)return l}},has(n){for(let r=e.length-1;r>=0;r--)if(n in H(e[r]))return!0;return!1},keys(){const n=[];for(let r=0;r<e.length;r++)n.push(...Object.keys(H(e[r])));return[...new Set(n)]}},q);const s={};for(let n=e.length-1;n>=0;n--)if(e[n]){const r=Object.getOwnPropertyDescriptors(e[n]);for(const l in r)l in s||Object.defineProperty(s,l,{enumerable:!0,get(){for(let i=e.length-1;i>=0;i--){const o=(e[i]||{})[l];if(o!==void 0)return o}}})}return s}function ve(e,...t){const s=new Set(t.flat());if(D in e){const r=t.map(l=>new Proxy({get(i){return l.includes(i)?e[i]:void 0},has(i){return l.includes(i)&&i in e},keys(){return l.filter(i=>i in e)}},q));return r.push(new Proxy({get(l){return s.has(l)?void 0:e[l]},has(l){return s.has(l)?!1:l in e},keys(){return Object.keys(e).filter(l=>!s.has(l))}},q)),r}const n=Object.getOwnPropertyDescriptors(e);return t.push(Object.keys(n).filter(r=>!s.has(r))),t.map(r=>{const l={};for(let i=0;i<r.length;i++){const o=r[i];o in e&&Object.defineProperty(l,o,n[o]?n[o]:{get(){return e[o]},set(){return!0},enumerable:!0})}return l})}function Se(e){const t="fallback"in e&&{fallback:()=>e.fallback};return F(be(()=>e.each,e.children,t||void 0))}function ke(e){let t=!1;const s=e.keyed,n=F(()=>e.when,void 0,{equals:(r,l)=>t?r===l:!r==!l});return F(()=>{const r=n();if(r){const l=e.children,i=typeof l=="function"&&l.length>0;return t=s||i,i?k(()=>l(r)):l}return e.fallback},void 0,void 0)}export{Se as F,ke as S,de as a,$ as b,me as c,ie as d,ye as e,oe as f,ve as g,ce as h,xe as m,we as o,v as s,k as u};
